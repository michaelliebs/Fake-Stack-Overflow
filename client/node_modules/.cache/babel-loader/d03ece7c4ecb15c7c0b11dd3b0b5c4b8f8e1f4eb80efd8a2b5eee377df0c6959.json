{"ast":null,"code":"var _jsxFileName = \"/Users/michaelliebs/pa04-bananaboys/client/src/components/UserContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\n\n// Create the UserContext with default values\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserContext = /*#__PURE__*/createContext({\n  user: null,\n  login: () => {},\n  logout: () => {}\n});\n\n// Define a function to encapsulate the provider setup\nfunction UserProvider({\n  children\n}) {\n  _s();\n  const [user, setUser] = useState(null);\n  const loadUserFromCookies = async () => {\n    const token = Cookies.get('user-token');\n    console.log('Token retrieved from cookie:', token);\n    if (token) {\n      try {\n        const response = await axios.get('/api/verify-token', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        console.log('User data retrieved:', response.data.user);\n        setUser(response.data.user);\n      } catch (error) {\n        console.error('Error verifying token', error);\n      }\n    }\n  };\n  useEffect(() => {\n    loadUserFromCookies();\n  }, []);\n\n  // Define the login function to update user state and set cookie\n  const login = userData => {\n    setUser(userData);\n    Cookies.set('user-token', userData.token); // Set token in cookies when user logs in\n    console.log('cookie set with token: ', userData.token);\n  };\n\n  // Define the logout function to clear user state and remove cookie\n  const logout = () => {\n    setUser(null);\n    Cookies.remove('user-token'); // Remove the token from cookies\n    console.log('Cookie removed');\n  };\n\n  // Prepare the context value that will be passed to any consumer components\n  const value = {\n    user,\n    login,\n    logout\n  };\n\n  // Render the Provider component from UserContext with the dynamic value\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n}\n\n// useUser hook for easy consumption of context\n_s(UserProvider, \"5s2qRsV95gTJBmaaTh11GoxYeGE=\");\n_c = UserProvider;\nfunction useUser() {\n  _s2();\n  return useContext(UserContext);\n}\n\n// Export UserProvider and the useUser hook\n_s2(useUser, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport { UserProvider, useUser };\nexport default UserContext;\nvar _c;\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","axios","Cookies","jsxDEV","_jsxDEV","UserContext","user","login","logout","UserProvider","children","_s","setUser","loadUserFromCookies","token","get","console","log","response","headers","Authorization","data","error","userData","set","remove","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useUser","_s2","$RefreshReg$"],"sources":["/Users/michaelliebs/pa04-bananaboys/client/src/components/UserContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\n\n// Create the UserContext with default values\nconst UserContext = createContext({\n    user: null,\n    login: () => {},\n    logout: () => {}\n});\n\n// Define a function to encapsulate the provider setup\nfunction UserProvider({ children }) {\n    const [user, setUser] = useState(null);\n\n    const loadUserFromCookies = async () => {\n        const token = Cookies.get('user-token');\n        console.log('Token retrieved from cookie:', token);\n        if (token) {\n            try {\n                const response = await axios.get('/api/verify-token', {\n                    headers: { Authorization: `Bearer ${token}` }\n                });\n                console.log('User data retrieved:', response.data.user);\n                setUser(response.data.user);\n            } catch (error) {\n                console.error('Error verifying token', error);\n            }\n        }\n    };    \n\n    useEffect(() => {\n        loadUserFromCookies();\n    }, []);\n\n    // Define the login function to update user state and set cookie\n    const login = userData => {\n        setUser(userData);\n        Cookies.set('user-token', userData.token);  // Set token in cookies when user logs in\n        console.log('cookie set with token: ', userData.token);\n    };\n\n    // Define the logout function to clear user state and remove cookie\n    const logout = () => {\n        setUser(null);\n        Cookies.remove('user-token');  // Remove the token from cookies\n        console.log('Cookie removed');\n    };\n\n    // Prepare the context value that will be passed to any consumer components\n    const value = { user, login, logout };\n\n    // Render the Provider component from UserContext with the dynamic value\n    return (\n        <UserContext.Provider value={value}>\n            {children}\n        </UserContext.Provider>\n    );\n}\n\n// useUser hook for easy consumption of context\nfunction useUser() {\n    return useContext(UserContext);\n}\n\n// Export UserProvider and the useUser hook\nexport { UserProvider, useUser };\nexport default UserContext;\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC7E,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,OAAO,MAAM,WAAW;;AAE/B;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,WAAW,gBAAGR,aAAa,CAAC;EAC9BS,IAAI,EAAE,IAAI;EACVC,KAAK,EAAEA,CAAA,KAAM,CAAC,CAAC;EACfC,MAAM,EAAEA,CAAA,KAAM,CAAC;AACnB,CAAC,CAAC;;AAEF;AACA,SAASC,YAAYA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAChC,MAAM,CAACL,IAAI,EAAEM,OAAO,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAEtC,MAAMc,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACpC,MAAMC,KAAK,GAAGZ,OAAO,CAACa,GAAG,CAAC,YAAY,CAAC;IACvCC,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEH,KAAK,CAAC;IAClD,IAAIA,KAAK,EAAE;MACP,IAAI;QACA,MAAMI,QAAQ,GAAG,MAAMjB,KAAK,CAACc,GAAG,CAAC,mBAAmB,EAAE;UAClDI,OAAO,EAAE;YAAEC,aAAa,EAAG,UAASN,KAAM;UAAE;QAChD,CAAC,CAAC;QACFE,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEC,QAAQ,CAACG,IAAI,CAACf,IAAI,CAAC;QACvDM,OAAO,CAACM,QAAQ,CAACG,IAAI,CAACf,IAAI,CAAC;MAC/B,CAAC,CAAC,OAAOgB,KAAK,EAAE;QACZN,OAAO,CAACM,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MACjD;IACJ;EACJ,CAAC;EAEDtB,SAAS,CAAC,MAAM;IACZa,mBAAmB,CAAC,CAAC;EACzB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMN,KAAK,GAAGgB,QAAQ,IAAI;IACtBX,OAAO,CAACW,QAAQ,CAAC;IACjBrB,OAAO,CAACsB,GAAG,CAAC,YAAY,EAAED,QAAQ,CAACT,KAAK,CAAC,CAAC,CAAE;IAC5CE,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEM,QAAQ,CAACT,KAAK,CAAC;EAC1D,CAAC;;EAED;EACA,MAAMN,MAAM,GAAGA,CAAA,KAAM;IACjBI,OAAO,CAAC,IAAI,CAAC;IACbV,OAAO,CAACuB,MAAM,CAAC,YAAY,CAAC,CAAC,CAAE;IAC/BT,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;EACjC,CAAC;;EAED;EACA,MAAMS,KAAK,GAAG;IAAEpB,IAAI;IAAEC,KAAK;IAAEC;EAAO,CAAC;;EAErC;EACA,oBACIJ,OAAA,CAACC,WAAW,CAACsB,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAAhB,QAAA,EAC9BA;EAAQ;IAAAkB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAE/B;;AAEA;AAAApB,EAAA,CAhDSF,YAAY;AAAAuB,EAAA,GAAZvB,YAAY;AAiDrB,SAASwB,OAAOA,CAAA,EAAG;EAAAC,GAAA;EACf,OAAOpC,UAAU,CAACO,WAAW,CAAC;AAClC;;AAEA;AAAA6B,GAAA,CAJSD,OAAO;AAKhB,SAASxB,YAAY,EAAEwB,OAAO;AAC9B,eAAe5B,WAAW;AAAC,IAAA2B,EAAA;AAAAG,YAAA,CAAAH,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}